# 
#  Copyright (c) 2012, Texas Instruments Incorporated
#  All rights reserved.
# 
#  Redistribution and use in source and binary forms, with or without
#  modification, are permitted provided that the following conditions
#  are met:
# 
#  *  Redistributions of source code must retain the above copyright
#     notice, this list of conditions and the following disclaimer.
# 
#  *  Redistributions in binary form must reproduce the above copyright
#     notice, this list of conditions and the following disclaimer in the
#     documentation and/or other materials provided with the distribution.
# 
#  *  Neither the name of Texas Instruments Incorporated nor the names of
#     its contributors may be used to endorse or promote products derived
#     from this software without specific prior written permission.
# 
#  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
#  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
#  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
#  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
#  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
#  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
#  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;
#  OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
#  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR
#  OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
#  EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
# 
%%{
    var dirName = this.filePath.substring(this.filePath.lastIndexOf('/') + 1);
    var target = this.dirMap[dirName].target;
    var name = target.name;
    var suffix = target.suffix;
    var cfgPkgName = this.dirMap[dirName].cfgPkgName;
    var exeName = (target.$name.match("microsoft") ? "exe" : "out");
%%}
## THIS FILE WAS GENERATED BY ti.sysbios.genx

COMMON = ../../common
include $(COMMON)/common.mak

CONFIGPKG = $(COMMON)/`dirName`/`cfgPkgName`

all: $(CONFIGPKG)/linker.cmd
all: event.`exeName`

## build common directory
$(CONFIGPKG)/linker.cmd: $(COMMON)/common.cfg $(COMMON)/`dirName`/makefile
	@echo making common
	@$(MAKE) -C $(COMMON)/`dirName` all

## build the test executable
event.`exeName`: ../event.c  $(CONFIGPKG)/compiler.opt $(CONFIGPKG)/linker.cmd
	@echo making $@
%
%    if (target.$name.match("microsoft")) {
%
	@$(CL_`suffix`) $(CL_OPTS_`suffix`) -c $(shell $(CAT) $(CONFIGPKG)/compiler.opt) ../event.c 
	@$(LNK_`suffix`) $(LNK_OPTS_`suffix`) -out:event.`exeName` event.obj -map:event.map -pdb:event.pdb @$(CONFIGPKG)/linker.cmd -libpath:$(RTS_LIB_`suffix`)
%
%    }
%    else {
%
	@$(CL_`suffix`) $(CL_OPTS_`suffix`) -@ $(CONFIGPKG)/compiler.opt ../event.c 
	@$(LNK_`suffix`) $(LNK_OPTS_`suffix`) -o event.`exeName` event.obj -c -m event.map $(CONFIGPKG)/linker.cmd $(RTS_LIB_`suffix`)
%
%    }
%

## clean up
clean:
	@$(REMOVE) *.obj *.out *.map *.exe *.manifest
#
#  @(#) ti.sysbios.genx; 2, 0, 0, 0,527; 5-18-2012 06:05:28; /db/vtree/library/trees/avala/avala-q37x/src/ xlibrary

#

